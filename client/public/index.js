"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var patient,fa,fi,ft,debug=!1;async function getDomain(){try{var e=await fetch("/getDomain",{method:"GET"});if(200!==e.status)throw"não foi possível carregar a página";var t=await e.json();return Promise.resolve(t)}catch(e){return Promise.reject(e)}}window.addEventListener("load",async function(e){try{var t=await getDomain();patient=t.patient,fa=t.fa,fi=t.fi,ft=t.ft,new Html}catch(e){console.log(e)}});var Html=function(){function e(){_classCallCheck(this,e),this.renderPatient(),this.renderFA(),this.renderFI(),this.renderFT()}return _createClass(e,[{key:"renderPatient",value:function(){var e=this,t=document.getElementById("patient"),n="<h3>Paciente</h3>";for(var a in n+="<table><tbody>",patient){var r=patient[a];n+="<tr><td>".concat(r.name,"</td>"),n+="gender"===a?'<td><input id="2" type="radio" class="setGender" name="'.concat(a,'"> Feminino</td>\n                    <td><input id="1" type="radio" class="setGender" name="').concat(a,'"> Masculino</td>'):'<td><input id="'.concat(a,'" class="setPatientValue" type="text"></td>')}n+="</tr></tbody></table>",t.innerHTML=n,Array.from(document.getElementsByClassName("setGender")).forEach(function(t){t.addEventListener("click",function(t){return e.setGender(t,patient)})}),Array.from(document.getElementsByClassName("setPatientValue")).forEach(function(t){t.addEventListener("change",function(t){return e.setValue(t,patient)})})}},{key:"renderFA",value:function(){var e=this,t=document.getElementById("fa"),n="<h3>FA</h3>";for(var a in n+="<table><tbody>",fa){var r=fa[a];n+='<tr>\n                    <td><input id="'.concat(a,'" class="setFa" type="checkbox"></td>\n                    <td>').concat(r.name,"</td>"),r.value?n+="<td>".concat(r.value,"</td>"):n+='<td><input id="'.concat(a,'Text" class="setFaValue" type="text"></td>'),n+="</tr>"}n+="</tbody></table>",t.innerHTML=n,Array.from(document.getElementsByClassName("setFa")).forEach(function(t){t.addEventListener("click",function(t){return e.setFactor(t,fa)})}),Array.from(document.getElementsByClassName("setFaValue")).forEach(function(t){t.addEventListener("change",function(t){return e.incluirValor(t,fa)})})}},{key:"renderFI",value:function(){var e=this,t=document.getElementById("fi"),n="<h3>FI</h3>";for(var a in n+="<table><tbody>",fi){var r=fi[a];n+='<tr>\n                    <td><input id="'.concat(a,'" class="setFi" type="checkbox"></td>\n                    <td>').concat(r.name,"</td>"),r.value?n+="<td>".concat(r.value,"</td>"):n+='<td><input id="'.concat(a,'Text" class="setFiValue" type="text"></td>'),n+="</tr>"}n+="</tbody></table>",t.innerHTML=n,Array.from(document.getElementsByClassName("setFi")).forEach(function(t){t.addEventListener("click",function(t){return e.setFactor(t,fi)})}),Array.from(document.getElementsByClassName("setFiValue")).forEach(function(t){t.addEventListener("change",function(t){return e.setValue(t,fi)})})}},{key:"renderFT",value:function(){var e=this,t=document.getElementById("ft"),n="<h3>FT</h3>";for(var a in n+="<table><tbody>",ft){var r=ft[a];n+='<tr>\n                    <td><input id="'.concat(a,'" class="setFt" type="checkbox"></td>\n                    <td>').concat(r.name,"</td>"),r.value?n+="<td>".concat(r.value,"</td>"):n+='<td><input id="'.concat(a,'Text" class="setFtValue" type="text"></td>'),n+="</tr>"}n+="</tbody></table>",t.innerHTML=n,Array.from(document.getElementsByClassName("setFt")).forEach(function(t){t.addEventListener("click",function(t){return e.setFactor(t,ft)})}),Array.from(document.getElementsByClassName("setFtValue")).forEach(function(t){t.addEventListener("change",function(t){return e.setValue(t,ft)})})}},{key:"setGender",value:function(e,t){var n=e.target,a=n.name,r=n.id;t[a].value=parseInt(r),debug&&console.log(t[a])}},{key:"setFactor",value:function(e,t){var n=e.target,a=n.checked,r=n.id;t[r].include=a,debug&&console.log(t[r])}},{key:"setValue",value:function(e,t){var n=e.target,a=parseFloat(n.value);a||(setTimeout(function(){n.style.removeProperty("border")},3e3),n.style.border="solid 1px red",n.value="");var r=n.id.split("Text")[0];t[r].value=a,debug&&console.log(t[r])}}]),e}();async function renderCalories(){try{var e=document.getElementById("calories"),t=(await getCalories()).calories;return e.textContent=t,Promise.resolve()}catch(e){return alert(e),Promise.reject(e)}}async function getCalories(){try{var e={patient:patient,fa:fa,fi:fi,ft:ft},t=await fetch("/getCalories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(200!==t.status)throw"".concat(n.error);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}