"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var patient,fa,fi,ft;async function getDomain(){try{var t=await fetch("/getDomain",{method:"GET"});if(200!==t.status)throw"não foi possível carregar a página";var e=await t.json();return Promise.resolve(e)}catch(t){return Promise.reject(t)}}window.addEventListener("load",async function(t){try{var e=await getDomain();patient=e.patient,fa=e.fa,fi=e.fi,ft=e.ft,new Html}catch(t){console.log(t)}});var Html=function(){function t(){_classCallCheck(this,t),this.renderPatient(),this.renderFA(),this.renderFI(),this.renderFT()}return _createClass(t,[{key:"renderPatient",value:function(){var t=this,e=document.getElementById("patient"),n="<h3>Paciente</h3>";for(var a in n+="<table><tbody>",patient){var r=patient[a];n+="<tr><td>".concat(r.name,"</td>"),n+="gender"===a?'<td><input id="2" type="radio" class="setGender" name="'.concat(a,'"> Feminino</td>\n                    <td><input id="1" type="radio" class="setGender" name="').concat(a,'"> Masculino</td>'):'<td><input id="'.concat(a,'" class="setPatientValue" type="text"></td>')}n+="</tr></tbody></table>",e.innerHTML=n,Array.from(document.getElementsByClassName("setGender")).forEach(function(e){e.addEventListener("click",function(e){return t.setGender(e,patient)})}),Array.from(document.getElementsByClassName("setPatientValue")).forEach(function(e){e.addEventListener("change",function(e){return t.setValue(e,patient)})})}},{key:"renderFA",value:function(){var t=this,e=document.getElementById("fa"),n="<h3>FA</h3>";for(var a in n+="<table><tbody>",fa){var r=fa[a];n+='<tr>\n                    <td><input id="'.concat(a,'" class="setFa" type="checkbox"></td>\n                    <td>').concat(r.name,"</td>"),r.value?n+="<td>".concat(r.value,"</td>"):n+='<td><input id="'.concat(a,'Text" class="setFaValue" type="text"></td>'),n+="</tr>"}n+="</tbody></table>",e.innerHTML=n,Array.from(document.getElementsByClassName("setFa")).forEach(function(e){e.addEventListener("click",function(e){return t.setFactor(e,fa)})}),Array.from(document.getElementsByClassName("setFaValue")).forEach(function(e){e.addEventListener("change",function(e){return t.incluirValor(e,fa)})})}},{key:"renderFI",value:function(){var t=this,e=document.getElementById("fi"),n="<h3>FI</h3>";for(var a in n+="<table><tbody>",fi){var r=fi[a];n+='<tr>\n                    <td><input id="'.concat(a,'" class="setFi" type="checkbox"></td>\n                    <td>').concat(r.name,"</td>"),r.value?n+="<td>".concat(r.value,"</td>"):n+='<td><input id="'.concat(a,'Text" class="setFiValue" type="text"></td>'),n+="</tr>"}n+="</tbody></table>",e.innerHTML=n,Array.from(document.getElementsByClassName("setFi")).forEach(function(e){e.addEventListener("click",function(e){return t.setFactor(e,fi)})}),Array.from(document.getElementsByClassName("setFiValue")).forEach(function(e){e.addEventListener("change",function(e){return t.setValue(e,fi)})})}},{key:"renderFT",value:function(){var t=this,e=document.getElementById("ft"),n="<h3>FT</h3>";for(var a in n+="<table><tbody>",ft){var r=ft[a];n+='<tr>\n                    <td><input id="'.concat(a,'" class="setFt" type="checkbox"></td>\n                    <td>').concat(r.name,"</td>"),r.value?n+="<td>".concat(r.value,"</td>"):n+='<td><input id="'.concat(a,'Text" class="setFtValue" type="text"></td>'),n+="</tr>"}n+="</tbody></table>",e.innerHTML=n,Array.from(document.getElementsByClassName("setFt")).forEach(function(e){e.addEventListener("click",function(e){return t.setFactor(e,ft)})}),Array.from(document.getElementsByClassName("setFtValue")).forEach(function(e){e.addEventListener("change",function(e){return t.setValue(e,ft)})})}},{key:"setGender",value:function(t,e){var n=t.target,a=n.name,r=n.id;e[a].value=parseInt(r),console.log(e[a])}},{key:"setFactor",value:function(t,e){var n=t.target,a=n.checked,r=n.id;e[r].include=a,console.log(e[r])}},{key:"setValue",value:function(t,e){var n=t.target,a=parseFloat(n.value);a||(setTimeout(function(){n.style.removeProperty("border")},3e3),n.style.border="solid 1px red",n.value="");var r=n.id.split("Text")[0];e[r].value=a,console.log(e[r])}}]),t}();async function renderCalories(){try{var t=document.getElementById("calories"),e=(await getCalories()).calories;return t.textContent=e,Promise.resolve()}catch(t){return alert(t),Promise.reject(t)}}async function getCalories(){try{var t={patient:patient,fa:fa,fi:fi,ft:ft},e=await fetch("/getCalories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(200!==e.status)throw"".concat(n.error);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}